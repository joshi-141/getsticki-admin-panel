{"ast":null,"code":"import \"../../utilities/globals/index.js\";\nimport { useState, useRef, useEffect } from 'react';\nimport { equal } from '@wry/equality';\nimport { DocumentType, verifyDocumentType } from \"../parser/index.js\";\nimport { useApolloClient } from \"./useApolloClient.js\";\nexport function useSubscription(subscription, options) {\n  var client = useApolloClient(options === null || options === void 0 ? void 0 : options.client);\n  verifyDocumentType(subscription, DocumentType.Subscription);\n\n  var _a = useState({\n    loading: !(options === null || options === void 0 ? void 0 : options.skip),\n    error: void 0,\n    data: void 0,\n    variables: options === null || options === void 0 ? void 0 : options.variables\n  }),\n      result = _a[0],\n      setResult = _a[1];\n\n  var _b = useState(function () {\n    if (options === null || options === void 0 ? void 0 : options.skip) {\n      return null;\n    }\n\n    return client.subscribe({\n      query: subscription,\n      variables: options === null || options === void 0 ? void 0 : options.variables,\n      fetchPolicy: options === null || options === void 0 ? void 0 : options.fetchPolicy,\n      context: options === null || options === void 0 ? void 0 : options.context\n    });\n  }),\n      observable = _b[0],\n      setObservable = _b[1];\n\n  var canResetObservableRef = useRef(false);\n  useEffect(function () {\n    return function () {\n      canResetObservableRef.current = true;\n    };\n  }, []);\n  var ref = useRef({\n    client: client,\n    subscription: subscription,\n    options: options\n  });\n  useEffect(function () {\n    var _a, _b, _c, _d;\n\n    var shouldResubscribe = options === null || options === void 0 ? void 0 : options.shouldResubscribe;\n\n    if (typeof shouldResubscribe === 'function') {\n      shouldResubscribe = !!shouldResubscribe(options);\n    }\n\n    if (options === null || options === void 0 ? void 0 : options.skip) {\n      if (!(options === null || options === void 0 ? void 0 : options.skip) !== !((_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.skip) || canResetObservableRef.current) {\n        setResult({\n          loading: false,\n          data: void 0,\n          error: void 0,\n          variables: options === null || options === void 0 ? void 0 : options.variables\n        });\n        setObservable(null);\n        canResetObservableRef.current = false;\n      }\n    } else if (shouldResubscribe !== false && (client !== ref.current.client || subscription !== ref.current.subscription || (options === null || options === void 0 ? void 0 : options.fetchPolicy) !== ((_b = ref.current.options) === null || _b === void 0 ? void 0 : _b.fetchPolicy) || !(options === null || options === void 0 ? void 0 : options.skip) !== !((_c = ref.current.options) === null || _c === void 0 ? void 0 : _c.skip) || !equal(options === null || options === void 0 ? void 0 : options.variables, (_d = ref.current.options) === null || _d === void 0 ? void 0 : _d.variables)) || canResetObservableRef.current) {\n      setResult({\n        loading: true,\n        data: void 0,\n        error: void 0,\n        variables: options === null || options === void 0 ? void 0 : options.variables\n      });\n      setObservable(client.subscribe({\n        query: subscription,\n        variables: options === null || options === void 0 ? void 0 : options.variables,\n        fetchPolicy: options === null || options === void 0 ? void 0 : options.fetchPolicy,\n        context: options === null || options === void 0 ? void 0 : options.context\n      }));\n      canResetObservableRef.current = false;\n    }\n\n    Object.assign(ref.current, {\n      client: client,\n      subscription: subscription,\n      options: options\n    });\n  }, [client, subscription, options, canResetObservableRef.current]);\n  useEffect(function () {\n    if (!observable) {\n      return;\n    }\n\n    var subscription = observable.subscribe({\n      next: function (fetchResult) {\n        var _a, _b;\n\n        var result = {\n          loading: false,\n          data: fetchResult.data,\n          error: void 0,\n          variables: options === null || options === void 0 ? void 0 : options.variables\n        };\n        setResult(result);\n        (_b = (_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onSubscriptionData) === null || _b === void 0 ? void 0 : _b.call(_a, {\n          client: client,\n          subscriptionData: result\n        });\n      },\n      error: function (error) {\n        setResult({\n          loading: false,\n          data: void 0,\n          error: error,\n          variables: options === null || options === void 0 ? void 0 : options.variables\n        });\n      },\n      complete: function () {\n        var _a, _b;\n\n        (_b = (_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onSubscriptionComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n      }\n    });\n    return function () {\n      subscription.unsubscribe();\n    };\n  }, [observable]);\n  return result;\n}","map":{"version":3,"names":["useState","useRef","useEffect","equal","DocumentType","verifyDocumentType","useApolloClient","useSubscription","subscription","options","client","Subscription","_a","loading","skip","error","data","variables","result","setResult","_b","subscribe","query","fetchPolicy","context","observable","setObservable","canResetObservableRef","current","ref","_c","_d","shouldResubscribe","Object","assign","next","fetchResult","onSubscriptionData","call","subscriptionData","complete","onSubscriptionComplete","unsubscribe"],"sources":["/Users/phoungeunvantho/B.COM/bmonitor.com/bmonitor/node_modules/@apollo/client/react/hooks/useSubscription.js"],"sourcesContent":["import \"../../utilities/globals/index.js\";\nimport { useState, useRef, useEffect } from 'react';\nimport { equal } from '@wry/equality';\nimport { DocumentType, verifyDocumentType } from \"../parser/index.js\";\nimport { useApolloClient } from \"./useApolloClient.js\";\nexport function useSubscription(subscription, options) {\n    var client = useApolloClient(options === null || options === void 0 ? void 0 : options.client);\n    verifyDocumentType(subscription, DocumentType.Subscription);\n    var _a = useState({\n        loading: !(options === null || options === void 0 ? void 0 : options.skip),\n        error: void 0,\n        data: void 0,\n        variables: options === null || options === void 0 ? void 0 : options.variables,\n    }), result = _a[0], setResult = _a[1];\n    var _b = useState(function () {\n        if (options === null || options === void 0 ? void 0 : options.skip) {\n            return null;\n        }\n        return client.subscribe({\n            query: subscription,\n            variables: options === null || options === void 0 ? void 0 : options.variables,\n            fetchPolicy: options === null || options === void 0 ? void 0 : options.fetchPolicy,\n            context: options === null || options === void 0 ? void 0 : options.context,\n        });\n    }), observable = _b[0], setObservable = _b[1];\n    var canResetObservableRef = useRef(false);\n    useEffect(function () {\n        return function () {\n            canResetObservableRef.current = true;\n        };\n    }, []);\n    var ref = useRef({ client: client, subscription: subscription, options: options });\n    useEffect(function () {\n        var _a, _b, _c, _d;\n        var shouldResubscribe = options === null || options === void 0 ? void 0 : options.shouldResubscribe;\n        if (typeof shouldResubscribe === 'function') {\n            shouldResubscribe = !!shouldResubscribe(options);\n        }\n        if (options === null || options === void 0 ? void 0 : options.skip) {\n            if (!(options === null || options === void 0 ? void 0 : options.skip) !== !((_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.skip) || canResetObservableRef.current) {\n                setResult({\n                    loading: false,\n                    data: void 0,\n                    error: void 0,\n                    variables: options === null || options === void 0 ? void 0 : options.variables,\n                });\n                setObservable(null);\n                canResetObservableRef.current = false;\n            }\n        }\n        else if ((shouldResubscribe !== false &&\n            (client !== ref.current.client ||\n                subscription !== ref.current.subscription ||\n                (options === null || options === void 0 ? void 0 : options.fetchPolicy) !== ((_b = ref.current.options) === null || _b === void 0 ? void 0 : _b.fetchPolicy) ||\n                !(options === null || options === void 0 ? void 0 : options.skip) !== !((_c = ref.current.options) === null || _c === void 0 ? void 0 : _c.skip) ||\n                !equal(options === null || options === void 0 ? void 0 : options.variables, (_d = ref.current.options) === null || _d === void 0 ? void 0 : _d.variables))) ||\n            canResetObservableRef.current) {\n            setResult({\n                loading: true,\n                data: void 0,\n                error: void 0,\n                variables: options === null || options === void 0 ? void 0 : options.variables,\n            });\n            setObservable(client.subscribe({\n                query: subscription,\n                variables: options === null || options === void 0 ? void 0 : options.variables,\n                fetchPolicy: options === null || options === void 0 ? void 0 : options.fetchPolicy,\n                context: options === null || options === void 0 ? void 0 : options.context,\n            }));\n            canResetObservableRef.current = false;\n        }\n        Object.assign(ref.current, { client: client, subscription: subscription, options: options });\n    }, [client, subscription, options, canResetObservableRef.current]);\n    useEffect(function () {\n        if (!observable) {\n            return;\n        }\n        var subscription = observable.subscribe({\n            next: function (fetchResult) {\n                var _a, _b;\n                var result = {\n                    loading: false,\n                    data: fetchResult.data,\n                    error: void 0,\n                    variables: options === null || options === void 0 ? void 0 : options.variables,\n                };\n                setResult(result);\n                (_b = (_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onSubscriptionData) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                    client: client,\n                    subscriptionData: result\n                });\n            },\n            error: function (error) {\n                setResult({\n                    loading: false,\n                    data: void 0,\n                    error: error,\n                    variables: options === null || options === void 0 ? void 0 : options.variables,\n                });\n            },\n            complete: function () {\n                var _a, _b;\n                (_b = (_a = ref.current.options) === null || _a === void 0 ? void 0 : _a.onSubscriptionComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n            },\n        });\n        return function () {\n            subscription.unsubscribe();\n        };\n    }, [observable]);\n    return result;\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}